---
title: 쿠버네티스(Kubernetes)
categories: [kubernetes,docker]
tags: [kubernetes,docker]     # TAG names should always be lowercase
---

도커, 쿠버네티스, 서비스메시에 대한 개념/설치과정 정리


# 도커

## 도커의 역사 

서버와 여러 실행환경 관련된 프로그램을 설치할 때 마다 각종 설정/충돌/오류가 발생하기 마련임.

그리고 이러한 문제는 마이크로서비스 아키텍쳐가 유행하게되며 프로그램 단위는 더 작게 쪼개지고, 관리가 더 복잡해게 되며 부각됨.

이때 도커가 출시됨.

2013년 3월 산타클라라에서 열린 Pycon Conference에서 dotCloud의 창업자인 Solomon Hykes가 The future of Linux Containers 라는 세션을 발표하면서 처음 공개함.

이 발표 이후 도커가 인기를 얻으면서 2013년 10월 아예 회사이름을 도커(Docker Inc.)로 바꾸고 2014년 6월 도커 1.0을 발표함. 

2014년 8월 도커에 집중하기 위해 dotCloud 플랫폼을 매각하고 2015년 4월 $95M(약 1,100억원) 투자를 유치하였음.

## 컨테이너

컨테이너 개념은 도커에서 처음 나온게 아니다.

원래 독립적인 프로그램의 실행환경을 제공하기 위해, 예전에는 OS를 추가적으로 설치하여 격리하는, 우리가 사용하는 VMware, Virtual Box와 같은 방법들이 사용되었다.

하지만 이 방식은 구조적으로 성능의 손실이 있을 수 밖에 없고, 이를 개선하기 위해 프로세스를 격리하는 방식이 등장했다. 이 방식에서, `격리된 프로세스`를 컨테이너 라 부른다.

따라서 도커 역시 당시 완전히 새로운 기술은 아니었고, 다만 `사용하기 쉽게` 컨테이너, 오버레이 네트워크, 유니온 파일 시스템 등의 기능을 묶은 것이다.

TODO 오버레이 네트워크, 유니온 파일 시스템

## 유니온 파일 시스템

각 컨테이너는 완전한 독립된 프로세스를 제공해야 하기 때문에, 용량이 어느정도 클 수 밖에 없다.

비슷한 예시를 들자면, 가장 간단하게 예전 방식인 OS 가상화를 예시로 들 수 있다.

프로그램을 독립된 환경에서 실행시키기 위해 온전한 OS 하나를 추가로 설치해야 했으니, 용량의 낭비가 심할 수 밖에 없다.

컨테이너는 프로세스만을 독립시켜 OS보다는 가벼우나 그래도 용량이 수백MB정도는 된다.

따라서 도커에서는 `레이어 저장방식`을 통해 각 프로그램을 레이어별로 합쳐 사용하게 해 준다.

(이미지)

이미지는 여러개의 읽기 전용read only 레이어로 구성되고 파일이 추가되거나 수정되면 새로운 레이어가 생성됩니다. ubuntu 이미지가 A + B + C의 집합이라면, ubuntu 이미지를 베이스로 만든 nginx 이미지는 A + B + C + nginx가 됩니다. webapp 이미지를 nginx 이미지 기반으로 만들었다면 예상대로 A + B + C + nginx + source 레이어로 구성됩니다. webapp 소스를 수정하면 A, B, C, nginx 레이어를 제외한 새로운 source(v2) 레이어만 다운받으면 되기 때문에 굉장히 효율적으로 이미지를 관리할 수 있습니다.

## 이미지 경로

TODO

## Dockerfile

TODO

## Docker Hub

TODO


## 컨테이너 다루기

실행 명령어 : 

```
docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG...]
```

TODO 관련 명령어 / 설정들

## 컨테이너 만들기

TODO

## Docker Compose

TODO




